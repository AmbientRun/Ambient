<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Package - Ambient Documentation</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../style.min.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guide</li><li class="chapter-item expanded "><a href="../user/installing.html"><strong aria-hidden="true">1.</strong> Installing</a></li><li class="chapter-item expanded "><a href="../user/setting_up_ide.html"><strong aria-hidden="true">2.</strong> Setting up your IDE</a></li><li class="chapter-item expanded "><a href="../user/overview.html"><strong aria-hidden="true">3.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../user/running_examples.html"><strong aria-hidden="true">4.</strong> Running examples</a></li><li class="chapter-item expanded "><a href="../user/api.html"><strong aria-hidden="true">5.</strong> API</a></li><li class="chapter-item expanded "><a href="../user/debugging.html"><strong aria-hidden="true">6.</strong> Debugging</a></li><li class="chapter-item expanded "><a href="../user/profiling.html"><strong aria-hidden="true">7.</strong> Profiling</a></li><li class="chapter-item expanded "><a href="../user/settings.html"><strong aria-hidden="true">8.</strong> Settings</a></li><li class="chapter-item expanded affix "><li class="part-title">Tutorial</li><li class="chapter-item expanded "><a href="../tutorials/game/0_intro.html"><strong aria-hidden="true">9.</strong> Intro</a></li><li class="chapter-item expanded "><a href="../tutorials/game/1_package.html"><strong aria-hidden="true">10.</strong> Chapter 1: Creating a project</a></li><li class="chapter-item expanded "><a href="../tutorials/game/2_player_character.html"><strong aria-hidden="true">11.</strong> Chapter 2: Player character</a></li><li class="chapter-item expanded "><a href="../tutorials/game/3_scene.html"><strong aria-hidden="true">12.</strong> Chapter 3: Scene</a></li><li class="chapter-item expanded "><a href="../tutorials/game/4_player_interaction.html"><strong aria-hidden="true">13.</strong> Chapter 4: Player interaction</a></li><li class="chapter-item expanded "><a href="../tutorials/game/5_models.html"><strong aria-hidden="true">14.</strong> Chapter 5: Models</a></li><li class="chapter-item expanded "><a href="../tutorials/game/6_ui.html"><strong aria-hidden="true">15.</strong> Chapter 6: UI</a></li><li class="chapter-item expanded "><a href="../tutorials/game/7_deploying.html"><strong aria-hidden="true">16.</strong> Chapter 7: Deploying</a></li><li class="chapter-item expanded "><a href="../tutorials/game/8_modding.html"><strong aria-hidden="true">17.</strong> Chapter 8: Modding</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference Guide</li><li class="chapter-item expanded "><a href="../reference/getting_content.html"><strong aria-hidden="true">18.</strong> Getting content</a></li><li class="chapter-item expanded "><a href="../reference/runtime.html"><strong aria-hidden="true">19.</strong> Runtime</a></li><li class="chapter-item expanded "><a href="../reference/package.html" class="active"><strong aria-hidden="true">20.</strong> Package</a></li><li class="chapter-item expanded "><a href="../reference/ecs.html"><strong aria-hidden="true">21.</strong> ECS</a></li><li class="chapter-item expanded "><a href="../reference/messages.html"><strong aria-hidden="true">22.</strong> Messages</a></li><li class="chapter-item expanded "><a href="../reference/models.html"><strong aria-hidden="true">23.</strong> Models</a></li><li class="chapter-item expanded "><a href="../reference/hierarchies.html"><strong aria-hidden="true">24.</strong> Hierarchies and transforms</a></li><li class="chapter-item expanded "><a href="../reference/asset_pipeline.html"><strong aria-hidden="true">25.</strong> Asset pipeline</a></li><li class="chapter-item expanded "><a href="../reference/networking.html"><strong aria-hidden="true">26.</strong> Networking</a></li><li class="chapter-item expanded "><a href="../reference/animations.html"><strong aria-hidden="true">27.</strong> Animations</a></li><li class="chapter-item expanded "><a href="../reference/physics.html"><strong aria-hidden="true">28.</strong> Physics</a></li><li class="chapter-item expanded "><a href="../reference/audio.html"><strong aria-hidden="true">29.</strong> Audio</a></li><li class="chapter-item expanded "><a href="../reference/ui.html"><strong aria-hidden="true">30.</strong> UI</a></li><li class="chapter-item expanded "><a href="../reference/distributing.html"><strong aria-hidden="true">31.</strong> Distributing</a></li><li class="chapter-item expanded "><a href="../reference/ci.html"><strong aria-hidden="true">32.</strong> CI</a></li><li class="chapter-item expanded "><a href="../reference/terminology.html"><strong aria-hidden="true">33.</strong> Terminology</a></li><li class="chapter-item expanded "><a href="../reference/common_pitfalls.html"><strong aria-hidden="true">34.</strong> Common pitfalls</a></li><li class="chapter-item expanded "><a href="../reference/advanced_installing.html"><strong aria-hidden="true">35.</strong> Advanced installation</a></li><li class="chapter-item expanded "><a href="../reference/faq.html"><strong aria-hidden="true">36.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="../reference/changelog.html"><strong aria-hidden="true">37.</strong> Changelog</a></li><li class="chapter-item expanded affix "><li class="part-title">Runtime internals</li><li class="chapter-item expanded "><a href="../runtime_internals/overview.html"><strong aria-hidden="true">38.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../runtime_internals/contributing.html"><strong aria-hidden="true">39.</strong> Contributing</a></li><li class="chapter-item expanded "><a href="../runtime_internals/ecs.html"><strong aria-hidden="true">40.</strong> ECS</a></li><li class="chapter-item expanded "><a href="../runtime_internals/renderer.html"><strong aria-hidden="true">41.</strong> Renderer</a></li><li class="chapter-item expanded "><a href="../runtime_internals/asset_cache.html"><strong aria-hidden="true">42.</strong> Asset cache</a></li><li class="chapter-item expanded "><a href="../runtime_internals/guidelines.html"><strong aria-hidden="true">43.</strong> Guidelines</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Ambient Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/AmbientRun/Ambient" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="package"><a class="header" href="#package">Package</a></h1>
<p>All Ambient packages must have an <code>ambient.toml</code> manifest that describes their functionality. This format is in flux, but is inspired by Rust’s <code>Cargo.toml</code>.</p>
<p>Next to the <code>ambient.toml</code>, other files may be present. A <code>screenshot.png</code> can be used to provide a thumbnail for the package on the Ambient website. A <code>README.md</code> can be used to provide a description of the package on the Ambient website.</p>
<p>To view documentation for a package, add <code>--open-docs</code> to a command that builds packages (i.e. <code>ambient build/run/serve/...</code>). This documentation is autogenerated and contains all items available to that package.</p>
<p>Package definitions are “projected” to guest code, so that they can use them. For Rust, this is done through the use of a build script that generates a <code>src/packages.rs</code>, creating a <code>packages</code> module that contains all the packages known to the package, including itself. Your own package can be accessed through <code>packages::this</code>.</p>
<h2 id="reference"><a class="header" href="#reference">Reference</a></h2>
<ul>
<li><code>SnakeCaseIdentifier</code>s are snake-case ASCII identifiers (as a string)</li>
<li><code>PascalCaseIdentifier</code>s are PascalCase ASCII identifiers (as a string)</li>
<li><code>Identifiers</code> are either a <code>SnakeCaseIdentifier</code> or a <code>PascalCaseIdentifier</code> based on context</li>
<li><code>ItemPath</code>s are a double-colon-separated list of <code>SnakeCaseIdentifier</code>s followed by a single <code>Identifier</code>. For example, <code>my_package</code> is an <code>Identifier</code>, and <code>my_package::my_component</code> is an <code>ItemPath</code>.</li>
<li>See <a href="#valuetype"><code>ValueType</code></a> for a description of the types that can be used in Ambient.</li>
</ul>
<h3 id="package--package"><a class="header" href="#package--package">Package / <code>[package]</code></a></h3>
<p>The <code>package</code> section contains metadata about the package itself, such as its name and version.</p>
<table><thead><tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>id</code></td><td><code>SnakeCaseIdentifier</code></td><td>✅</td><td>The package’s ID. Autogenerated by Ambient. Do not attempt to specify your own ID.</td></tr>
<tr><td><code>name</code></td><td><code>String</code></td><td>✅</td><td>A human-readable name for the package.</td></tr>
<tr><td><code>version</code></td><td><code>String</code></td><td>✅</td><td>The package’s version, in <code>(major, minor, patch)</code> format. Semantically versioned.</td></tr>
<tr><td><code>content</code></td><td><code>PackageContent</code></td><td>✅</td><td>A description of the content of this Package. See below.</td></tr>
<tr><td><code>ambient_version</code></td><td><code>String</code></td><td>✅</td><td>The version of Ambient this package is intended to be used with.</td></tr>
<tr><td><code>authors</code></td><td><code>String[]</code></td><td></td><td>The authors of the package.</td></tr>
<tr><td><code>description</code></td><td><code>String</code></td><td></td><td>A human-readable description of the package.</td></tr>
<tr><td><code>repository</code></td><td><code>String</code></td><td></td><td>Where the source code for this package can be found.</td></tr>
<tr><td><code>public</code></td><td><code>Bool</code></td><td></td><td>Indicates if this package will be publicly available when deployed. Defaults to true.</td></tr>
</tbody></table>
<h4 id="packagecontent"><a class="header" href="#packagecontent"><code>PackageContent</code></a></h4>
<p>These are the valid configurations for package content:</p>
<pre><code class="language-toml"># A Playable is anything that can be run as an application; i.e. games, examples, applications etc.
content = { type = &quot;Playable&quot; }
content = { type = &quot;Playable&quot;, example = true } # example defaults to false

# Assets are things you can use as a dependency in your package
content = { type = &quot;Asset&quot;, models = true, textures = true } # Contains models and textures
# These are the valid asset types:
#
#   models
#   animations
#   textures
#   materials
#   audio
#   fonts
#   code
#   schema
#
# You can use any combination of them

# Tools are things you can use to develop your package
content = { type = &quot;Tool&quot; }

# Mods are extension to Playables
content = { type = &quot;Mod&quot;, for_playables = [&quot;i3terk32jw&quot;] }
</code></pre>
<h4 id="example"><a class="header" href="#example">Example</a></h4>
<pre><code class="language-toml">#
# The package section describes all package metadata.
#
[package]
id = &quot;d563xtcr72ovuuhfkvsgag6z3wiy5jwr&quot;
name = &quot;My Cool Package&quot;
version = &quot;0.0.1&quot;
content = { type = &quot;Asset&quot;, code = true }
ambient_version = &quot;0.3.0&quot;

# The following are optional:
# authors = [&quot;Cool Cat&quot;]
# description = &quot;A sample package that's the coolest thing ever.&quot;
# repository = &quot;https://my-cool-forge.io/my-cool-package&quot;
# public = true
</code></pre>
<h3 id="build--build"><a class="header" href="#build--build">Build / <code>[build]</code></a></h3>
<p>The build section contains settings related to building the package.</p>
<h4 id="rust-settings--buildrust"><a class="header" href="#rust-settings--buildrust">Rust Settings / <code>[build.rust]</code></a></h4>
<table><thead><tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>feature-multibuild</code></td><td><code>String[]</code></td><td></td><td>An array of strings defining the Rust features to be used when building the package. This is used to build the same code for both client and server.<br /><br /><code>cargo build</code> will be run with each of these features to produce a separate WASM binary, which is then componentized and copied into a folder of the corresponding name in <code>build/</code>.<br /><br />Client and server are built by default (e.g. <code>[&quot;client&quot;, &quot;server&quot;]</code>); this is exposed so that you can disable building one side entirely if required.</td></tr>
</tbody></table>
<h4 id="example-1"><a class="header" href="#example-1">Example</a></h4>
<pre><code class="language-toml">[build.rust]
feature-multibuild = [&quot;client&quot;, &quot;server&quot;]
</code></pre>
<h3 id="components--components"><a class="header" href="#components--components">Components / <code>[components]</code></a></h3>
<p>The <code>components</code> section contains custom components defined by the package. Components are used to store data on entities.</p>
<p>This is a TOML table, where the keys are the component IDs (<code>SnakeCaseIdentifier</code>), and the values are the component definitions.</p>
<table><thead><tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>type</code></td><td><code>ValueType</code></td><td>✅</td><td>The type of the component.</td></tr>
<tr><td><code>name</code></td><td><code>String</code></td><td></td><td>A human-readable name for the component.</td></tr>
<tr><td><code>description</code></td><td><code>String</code></td><td></td><td>A human-readable description of the component.</td></tr>
<tr><td><code>attributes</code></td><td><code>ComponentAttribute[]</code></td><td></td><td>An array of attributes for the component.</td></tr>
</tbody></table>
<p>A <code>ComponentAttribute</code> is a string that can be one of the following:</p>
<ul>
<li><code>Debuggable</code>: this component can have its debug value printed, especially in ECS dumps</li>
<li><code>Networked</code>: this component is networked</li>
<li><code>Resource</code>: this component will only ever be used as a resource; will error if attached to an entity</li>
<li><code>MaybeResource</code>: this component can be used as a resource or as a component; necessary if treating this component as a resource</li>
<li><code>Store</code>: this component’s value should be persisted when the world is saved</li>
</ul>
<h4 id="example-2"><a class="header" href="#example-2">Example</a></h4>
<pre><code class="language-toml">[components]
# Inline tables can be used.
cool_component = { type = &quot;I32&quot;, name = &quot;Cool Component&quot;, description = &quot;A cool component&quot;, attributes = [&quot;Debuggable&quot;] }

# Explicit tables can also be used.
[components.cool_component2]
type = &quot;I32&quot;
name = &quot;Cool Component 2&quot;
description = &quot;A cool component 2&quot;
attributes = [&quot;Debuggable&quot;]
</code></pre>
<h3 id="concepts--concepts"><a class="header" href="#concepts--concepts">Concepts / <code>[concepts]</code></a></h3>
<p>The <code>concepts</code> section contains custom concepts defined by the package. Concepts are used to define a set of components that can be attached to an entity. For more information on how to use concepts, see the <a href="./ecs.html#concepts">ECS documentation</a>.</p>
<p>This is a TOML table, where the keys are the concept IDs (<code>CamelCaseIdentifier</code>), and the values are the concept definitions.</p>
<table><thead><tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>name</code></td><td><code>String</code></td><td></td><td>A human-readable name for the concept.</td></tr>
<tr><td><code>description</code></td><td><code>String</code></td><td></td><td>A human-readable description of the concept.</td></tr>
<tr><td><code>extends</code></td><td><code>String[]</code></td><td></td><td>An array of concepts to extend. Must be defined in this package manifest.</td></tr>
<tr><td><code>components.required</code></td><td><code>Map&lt;ItemPath, ConceptValue&gt;</code></td><td>✅</td><td>An object containing the required components for this concept, and any associated information about the use of the component in this concept (see below).</td></tr>
<tr><td><code>components.optional</code></td><td><code>Map&lt;ItemPath, ConceptValue&gt;</code></td><td></td><td>An object containing the optional components for this concept, and any associated information about the use of the component in this concept (see below). These components do not need to be specified to satisfy a concept, but may provide additional control or information if available.</td></tr>
</tbody></table>
<p>The <code>components</code> is an object where the keys are <code>ItemPath</code>s of components defined in the package manifest, and the values are <code>ConceptValue</code>s.</p>
<p><code>ConceptValue</code>s are a TOML table with the following properties:</p>
<table><thead><tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>description</code></td><td><code>String</code></td><td></td><td>A human-readable description of the component in the context of the concept, which may be different to the component’s description.</td></tr>
<tr><td><code>suggested</code></td><td><code>toml::Value</code></td><td></td><td>If specified, the suggested value for this component in this concept. This is merely a suggestion, but must match the type of the component.<br /><br /><code>Mat4</code> and <code>Quat</code> support <code>Identity</code> as a string, which will use the relevant identity value for that type.<br /><br /><code>F32</code> and <code>F64</code> support <code>PI</code>, <code>FRAC_PI_2</code>, <code>-PI</code>, and <code>-FRAC_PI_2</code> as string values, which correspond to pi (~3.14), half-pi (~1.57), and negative versions respectively.</td></tr>
</tbody></table>
<h4 id="example-3"><a class="header" href="#example-3">Example</a></h4>
<pre><code class="language-toml">[concepts.Concept1]
name = &quot;Concept 1&quot;
description = &quot;The best&quot;
[concepts.Concept1.components.required]
cool_component = {}

# A concept that extends `concept1` and has both `cool_component` and `cool_component2`.
[concepts.Concept2]
extends = [&quot;Concept1&quot;]

[concepts.Concept2.components.required]
cool_component2 = { suggested = 42 }

[concepts.Concept2.components.optional]
cool_component3 = { suggested = 42 }
</code></pre>
<h3 id="messages--messages"><a class="header" href="#messages--messages">Messages / <code>[messages]</code></a></h3>
<p>The <code>messages</code> section contains custom messages defined by the package. Messages are used to communicate between client and server, or between packages/modules on the same side.</p>
<p>For an example of how to use messages, see the <a href="https://github.com/AmbientRun/Ambient/tree/main/guest/rust/examples/intermediate/messaging">messaging example</a>.</p>
<p>This is a TOML table, where the keys are the message IDs (<code>PascalCaseIdentifier</code>), and the values are the message definitions.</p>
<table><thead><tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>description</code></td><td><code>String</code></td><td></td><td>A human-readable description of the message.</td></tr>
<tr><td><code>fields</code></td><td><code>Map&lt;SnakeCaseIdentifier, ValueType&gt;</code></td><td>✅</td><td>An object containing the fields and their types. Must be one of the types supported for components.</td></tr>
</tbody></table>
<h4 id="example-4"><a class="header" href="#example-4">Example</a></h4>
<pre><code class="language-toml">[messages.Input]
description = &quot;Describes the input state of the player.&quot;
[messages.Input.fields]
# Each field in the message must have a type.
direction = &quot;Vec2&quot;
mouse_delta_x = &quot;F32&quot;
</code></pre>
<h3 id="enums--enums"><a class="header" href="#enums--enums">Enums / <code>[enums]</code></a></h3>
<p>The <code>enums</code> section contains custom enums defined by the package. Enums are used to define a closed set of values.</p>
<p>This is a TOML table, where the keys are the package IDs (<code>PascalCaseIdentifier</code>), and the values are the package definitions.</p>
<table><thead><tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>description</code></td><td><code>String</code></td><td></td><td>A human-readable description of the enum.</td></tr>
<tr><td><code>members</code></td><td><code>Map&lt;PascalCaseIdentifier, String&gt;</code></td><td>✅</td><td>An object containing the members and their descriptions. The description can be empty.</td></tr>
</tbody></table>
<h4 id="example-5"><a class="header" href="#example-5">Example</a></h4>
<pre><code class="language-toml">[enums.CakeBakeState]
description = &quot;Describes the state of a cake bake.&quot;
[enums.CakeBakeState.members]
GatheringIngredients = &quot;Gathering ingredients&quot;
MixingIngredients = &quot;Mixing ingredients&quot;
Baking = &quot;Baking&quot;
Cooling = &quot;Cooling&quot;
Decorating = &quot;Decorating&quot;
Done = &quot;Done&quot;
</code></pre>
<h3 id="includes--includes"><a class="header" href="#includes--includes">Includes / <code>[includes]</code></a></h3>
<p>The <code>includes</code> section contains a list of manifests to pull in under a given name. This is useful for splitting up a package into multiple files.</p>
<p>This is a TOML table, where the keys are the name that you want to access this include by (<code>SnakeCaseIdentifier</code>), and the location of the package manifest is the value.</p>
<h4 id="example-6"><a class="header" href="#example-6">Example</a></h4>
<pre><code class="language-toml">[includes]
graphics = &quot;graphics/ambient.toml&quot;
</code></pre>
<h3 id="dependencies--dependencies"><a class="header" href="#dependencies--dependencies">Dependencies / <code>[dependencies]</code></a></h3>
<p>The <code>dependencies</code> section contains a list of package IDs that this package depends on.</p>
<p>Depending on another package gives you access to its items, including its components, concepts, messages, and enums. It can also provide access to any assets that the package has.</p>
<p>This is a TOML table, where the keys are the name that you want to access this package by (<code>SnakeCaseIdentifier</code>), and the location of the package is the value.</p>
<p>To access an item from a package, use the following syntax: <code>import_name::item_id</code>. For example, if you have a package imported with the name <code>the_basics</code> and an enum with ID <code>BasicEnum</code>, you can access it with <code>the_basics::BasicEnum</code>.</p>
<p>At least one of <code>path</code> or (<code>id</code> and <code>version</code>) must be specified.</p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>path</code></td><td><code>String</code></td><td>A relative path to the package to depend on.</td></tr>
<tr><td><code>id</code></td><td><code>String</code></td><td>The ID of a package to depend on. Must be combined with <code>version</code>.</td></tr>
<tr><td><code>version</code></td><td><code>String</code></td><td>The version of a package to depend on. Only exact versions are currently supported. Must be combined with <code>id</code>.</td></tr>
<tr><td><code>enabled</code></td><td><code>bool</code></td><td>Control whether or not logic associated with this package should be enabled on load. Enabled by default.</td></tr>
</tbody></table>
<p>For an example of how to use dependencies, see the <a href="https://github.com/AmbientRun/Ambient/tree/main/guest/rust/examples/intermediate/dependencies">dependencies example</a>.</p>
<h4 id="example-7"><a class="header" href="#example-7">Example</a></h4>
<pre><code class="language-toml">[dependencies]
the_basics = { path = &quot;../basics&quot; }

[components]
my_component = { type = &quot;the_basics::BasicEnum&quot; }
</code></pre>
<h3 id="runtime-access-to-packages"><a class="header" href="#runtime-access-to-packages">Runtime access to packages</a></h3>
<p>Packages are represented as entities within the ECS, with their metadata being stored as components. This means that you can access the metadata of a package at runtime. To do so, you can use the <code>entity()</code> function inside the generated Rust code for the package:</p>
<pre><pre class="playground"><code class="language-rust">use ambient_api::prelude::*;

#[main]
fn main() {
    dbg!(entity::get_all_components(packages::this::entity()));
}
</code></pre></pre>
<p>Or by querying for entities that have the <code>is_package</code> component:</p>
<pre><pre class="playground"><code class="language-rust">use ambient_api::{
    core::package::components::{is_package, name},
    prelude::*,
};

#[main]
fn main() {
    let q = query((is_package(), name())).build();
    // List all packages and their names.
    dbg!(q.evaluate());
}
</code></pre></pre>
<h3 id="valuetype"><a class="header" href="#valuetype"><code>ValueType</code></a></h3>
<p>In Ambient, all typed values must have a type that belongs to <code>ValueType</code>. This includes component types and message fields.</p>
<p>A <code>ValueType</code> is either:</p>
<ul>
<li>
<p>a string that can be one of the following primitive types:</p>
<ul>
<li><code>Bool</code>: a boolean value, true or false</li>
<li><code>Empty</code>: a component that has no value; most often used for tagging an entity</li>
<li><code>EntityId</code>: an entity ID</li>
<li><code>F32</code>: a 32-bit floating point value</li>
<li><code>F64</code>: a 64-bit floating point value</li>
<li><code>Mat4</code>: a 4x4 32-bit floating point matrix</li>
<li><code>Quat</code>: a 32-bit floating point quaternion</li>
<li><code>String</code>: a UTF-8 string</li>
<li><code>U8</code>: an 8-bit unsigned integer value</li>
<li><code>U16</code>: an 16-bit unsigned integer value</li>
<li><code>U32</code>: a 32-bit unsigned integer value</li>
<li><code>U64</code>: a 64-bit unsigned integer value</li>
<li><code>I8</code>: an 8-bit signed integer value</li>
<li><code>I16</code>: an 16-bit signed integer value</li>
<li><code>I32</code>: a 32-bit signed integer value</li>
<li><code>I64</code>: a 64-bit signed integer value</li>
<li><code>Uvec2</code>: a 2-element 32-bit unsigned integer vector</li>
<li><code>Uvec3</code>: a 3-element 32-bit unsigned integer vector</li>
<li><code>Uvec4</code>: a 4-element 32-bit unsigned integer vector</li>
<li><code>Ivec2</code>: a 2-element 32-bit signed integer vector</li>
<li><code>Ivec3</code>: a 3-element 32-bit signed integer vector</li>
<li><code>Ivec4</code>: a 4-element 32-bit signed integer vector</li>
<li><code>Vec2</code>: a 2-element 32-bit floating point vector</li>
<li><code>Vec3</code>: a 3-element 32-bit floating point vector</li>
<li><code>Vec4</code>: a 4-element 32-bit floating point vector</li>
<li><code>Duration</code>: A time span. Often used as a timestamp, in which case it designates the duration since Jan 1, 1970.</li>
</ul>
</li>
<li>
<p>a contained type of the form <code>{ type = &quot;Vec&quot;, element_type = ValueType }</code> or <code>{ type = &quot;Option&quot;, element_type = ValueType }</code></p>
<ul>
<li>Note that <code>Vec</code> and <code>Option</code> are the only supported container types, and <code>element_type</code> must be a primitive <code>ValueType</code> (that is, you cannot have nested contained types).</li>
</ul>
</li>
<li>
<p>a string that refers to an <code>enum</code> defined by a package; see <a href="./package.html#enums--enums">Enums</a>.</p>
</li>
</ul>
<p>Note that <code>ValueType</code>s are not themselves values, but rather types of values. For example, <code>Vec2</code> is a <code>ValueType</code>, but <code>Vec2(1.0, 2.0)</code> is a value of type <code>Vec2</code>. Additionally, <code>ValueType</code>s from other packages can be referred to using <code>ItemPath</code>s: <code>my_package::my_component::MyType</code>.</p>
<h2 id="webassembly"><a class="header" href="#webassembly">WebAssembly</a></h2>
<p>All <code>.wasm</code> components in the <code>build/{client, server}</code> directory will be loaded for the given network side. The <code>.wasm</code> filenames must be snake-case ASCII identifiers, like the <code>id</code> in the manifest.</p>
<p>This means any <code>.wasm</code> which implements the Ambient <a href="https://github.com/AmbientRun/Ambient/tree/main/crates/wasm/wit">WIT interface</a> and targets WASI snapshot 2 (or uses an adapter that targets WASI snapshot 2) should run within Ambient.</p>
<p>As a convenience for Rust users, Ambient will automatically build a <code>Cargo.toml</code> if present at the root of your package, as <code>wasm32-wasi</code> for the features specified in <code>build.rust.feature-multibuild</code> in <code>ambient.toml</code> (defaults to <code>client</code> and <code>server</code>).</p>
<p>The default new package template will create <code>client.rs</code> and <code>server.rs</code> files, with a <code>Cargo.toml</code> preconfigured with targets for both. The resulting WASM bytecode files are then converted to a <em>component</em> and placed in <code>build/{client, server}</code>.</p>
<p>The process it takes is equivalent to these commands:</p>
<pre><code class="language-sh">cd your_package
cargo build --target wasm32-wasi --features client
wasm-tools component new target/wasm32-wasi/debug/your_package_client.wasm -o build/client/your_package.wasm --adapt wasi_snapshot_preview1.command.wasm

cargo build --target wasm32-wasi --features server
wasm-tools component new target/wasm32-wasi/debug/your_package_server.wasm -o build/server/your_package.wasm --adapt wasi_snapshot_preview1.command.wasm
</code></pre>
<p>using <a href="https://github.com/bytecodealliance/wasm-tools">wasm-tools</a> and a bundled version of the <a href="https://github.com/bytecodealliance/wasmtime/tree/main/crates/wasi-preview1-component-adapter">preview1-to-preview2 WASI adapter</a>.</p>
<h3 id="rust"><a class="header" href="#rust">Rust</a></h3>
<p>Rust is a first-class language for Ambient packages. The default new package template will create <code>client.rs</code> and <code>server.rs</code> files, with a <code>Cargo.toml</code> preconfigured with targets for both.</p>
<p>The API provides a <code>#[main]</code> attribute macro that generates code to allow you to access the data and functionality of the packages known to your package. All packages, including your own, will be in the <code>packages</code> module.</p>
<h3 id="restrictions"><a class="header" href="#restrictions">Restrictions</a></h3>
<p>When running locally, guest code can:</p>
<ul>
<li>use WASI filesystem APIs (e.g. <code>std::fs</code> in Rust) to read and write files in the <code>data</code> directory of the built package</li>
<li>use the Ambient HTTP APIs (e.g. <code>http</code> in Rust) to make HTTP GET/POST requests to arbitrary servers</li>
</ul>
<p>This functionality is disabled when the server is running on a hosted environment (i.e. Ambient deployments) for security reasons. To test if your logic still works in a hosted environment, run Ambient with the <code>AMBIENT_HOSTED</code> environment variable set to anything (e.g. <code>AMBIENT_HOSTED=1 ambient run</code>).</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../reference/runtime.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../reference/ecs.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../reference/runtime.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../reference/ecs.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
